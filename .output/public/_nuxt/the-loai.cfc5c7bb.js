import{H as E,T as R,M as J}from"./components.9bb7d1b5.js";import O from"./Icon.d2eaa27f.js";import{k as W,a as l,Y as X,b as Y,x as y,y as k,O as i,A as p,V as h,G as _,u as t,I as F,a0 as j,H as M,D,J as K,z as Q,a2 as U,_ as Z,W as ee,X as te,$ as ae}from"./swiper-vue.1fc45518.js";import{_ as se}from"./ComicsPagination.7b94b174.js";import{b as oe,a as ne,c as ie}from"./entry.71724ffc.js";import{u as I}from"./useFetchData.e3cab5d1.js";import{_ as ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./config.518ce47a.js";import"./ComicCard.d63079f4.js";const re=u=>(ee("data-v-98be7126"),u=u(),te(),u),le={class:"max-w-6xl mx-auto px-3"},pe={class:"flex items-center gap-2 text-xl sm:text-2xl md:text-3xl font-bold mb-4 mt-4 md:mt-8"},ue=re(()=>h("p",{class:"my-3 flex items-center gap-2 rounded text-white"},null,-1)),me=W({__name:"the-loai",async setup(u){let m,w;const n=l(""),x=l([]),v=l(0),d=l([]),g=l(!1),P=oe(),c=ne(),S=async e=>{n.value=e,P.replace({query:{type:e}})},N=async(e,s)=>{try{g.value=!0;const a=await I(e==="tat-ca"?`/truyen-moi?page=${s}`:`/the-loai/${e}?page=${s}`);return x.value=a==null?void 0:a.comics,v.value=a==null?void 0:a.totalPages,a}catch(a){console.log(a)}finally{g.value=!1}},b=c.query.page,B=b&&!isNaN(+b)?Number(c.query.page):1,C=c.query.type;n.value=C?String(C):"tat-ca";const[H,T]=([m,w]=X(()=>Promise.all([N(n.value,B),I("/the-loai")])),m=await m,w(),m),$=[{slug:"tat-ca",name:"Tát cả"},...T].findIndex(e=>e.slug===c.query.type);if($===-1||!H)throw ie({statusCode:404,statusMessage:"Page Not Found"});return d.value=T,Y(c,async e=>{window.scrollTo({top:0,behavior:"smooth"});const s=e.query.page,a=s&&!isNaN(+s)?Number(s):1,f=e.query.type?String(e.query.type):"all";await N(f,a)}),(e,s)=>{const a=R,f=J,V=E,z=O,q=ae,G=j,L=se;return y(),k(F,null,[i(V,null,{default:p(()=>{var o;return[i(a,null,{default:p(()=>{var r;return[_(M(`${((r=t(d).find(A=>A.slug===t(n)))==null?void 0:r.name)||`Tất cả - Trang ${t(c).query.page??1}`} | NComics`),1)]}),_:1}),i(f,{name:"description",content:((o=t(d).find(r=>r.id===t(n)))==null?void 0:o.description)||"Free comic and manga reader online"},null,8,["content"])]}),_:1}),h("main",le,[h("h2",pe,[i(z,{name:"fa-solid:crown",size:"36",class:"text-emerald-500"}),_(" Thể loại ")]),i(G,{"slides-per-view":"auto",loop:!1,class:"border-y",modules:["SwiperFreeMode"in e?e.SwiperFreeMode:t(U),"SwiperNavigation"in e?e.SwiperNavigation:t(Z)],"free-mode":!0,"initial-slide":t($)},{default:p(()=>[i(q,{class:D(`swiper-slide-genre px-5 py-3 select-none cursor-pointer ${t(n)==="tat-ca"?"bg-emerald-500 text-white":""}`),onClick:s[0]||(s[0]=o=>S("tat-ca"))},{default:p(()=>[_(" Tất cả ")]),_:1},8,["class"]),(y(!0),k(F,null,K(t(d),o=>(y(),Q(q,{key:o.slug,class:D(`swiper-slide-genre px-5 py-3 select-none cursor-pointer ${o.slug===t(n)?"bg-emerald-500 text-white":""}`),onClick:r=>S(o.slug)},{default:p(()=>[_(M(o.name),1)]),_:2},1032,["class","onClick"]))),128))]),_:1},8,["modules","initial-slide"]),ue,i(L,{comics:t(x),"total-pages":t(v),"is-fetching":t(g)},null,8,["comics","total-pages","is-fetching"])])],64)}}});const Se=ce(me,[["__scopeId","data-v-98be7126"]]);export{Se as default};
