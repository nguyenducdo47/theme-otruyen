import{H as A,T as E,M as G}from"./components.9bb7d1b5.js";import J from"./Icon.d2eaa27f.js";import{_ as L}from"./ComicsPagination.7b94b174.js";import{a as O,b as Q,c as S}from"./entry.71724ffc.js";import{u as Y}from"./useFetchData.e3cab5d1.js";import{t as y,f as F}from"./data.801821c8.js";import{k as j,a as l,Y as K,b as U,x as c,y as i,O as u,A as T,V as x,I as h,J as V,u as o,G as H,H as v,D as I}from"./swiper-vue.1fc45518.js";import"./config.518ce47a.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./ComicCard.d63079f4.js";const W={class:"max-w-6xl mx-auto px-3"},X={class:"flex flex-wrap items-center gap-1.5 mt-5 sm:gap-3"},Z=["onClick"],ee={class:"flex items-center flex-wrap gap-2.5 mb-5 mt-3 font-semibold sm:gap-5"},te=["onClick"],de=j({__name:"top",async setup(ae){let p,w;const s=l("all"),m=l("all"),C=l([]),b=l(1),d=l(!1),n=O(),f=Q(),q=async(e,r=1)=>{try{d.value=!0;const t=await Y(`/top/${e==="all"?"":e}?page=${r}&status=${m.value}`);return C.value=t.comics,b.value=t.total_pages,t}catch(t){console.log(t)}finally{d.value=!1}},N=n.query.tab;s.value=y.findIndex(e=>e.type===N)>-1?N:"all";const $=n.query.page,M=$&&!isNaN(+$)?Number(n.query.page):1,k=n.query.filter;if(m.value=F.findIndex(e=>e.value===k)>-1?k:"all",!([p,w]=K(()=>q(s.value,M)),p=await p,w(),p))throw S({statusCode:404,statusMessage:"Page Not Found"});const P=e=>{s.value=e;const{page:r,...t}=n.query;f.replace({query:{...t,tab:e}})},B=e=>{m.value=e;const{filter:r,page:t,..._}=n.query;if(e==="all"){f.replace({query:_});return}f.replace({query:{..._,filter:e}})};return U([s,n],async([e,r])=>{window.scrollTo({top:0,behavior:"smooth"});const t=r.query.page||1;await q(e,Number(t))}),(e,r)=>{const t=E,_=G,D=A,R=J,z=L;return c(),i(h,null,[u(D,null,{default:T(()=>[u(t,null,{default:T(()=>{var a;return[H(v(`${((a=o(y).find(g=>g.type===o(s)))==null?void 0:a.name)+` - Page ${o(n).query.page??1}`||"Genres"} | NComics`),1)]}),_:1}),u(_,{name:"description",content:"Free comic and manga reader online"})]),_:1}),x("main",W,[x("ul",X,[(c(!0),i(h,null,V(o(y),a=>(c(),i("li",{key:a.type,class:I(`flex items-center gap-1 px-3 py-2 rounded cursor-pointer duration-150 select-none ${a.type===o(s)?"bg-emerald-500 text-white":""}`),onClick:g=>P(a.type)},[u(R,{name:a.icon,size:"24"},null,8,["name"]),H(" "+v(a.name),1)],10,Z))),128))]),x("ul",ee,[(c(!0),i(h,null,V(o(F),a=>(c(),i("li",{class:I(`min-w-[60px] cursor-pointer text-center border px-3 py-1.5 rounded ${a.value===o(m)?"border-emerald-500 text-emerald-500":""}`),onClick:g=>B(a.value)},v(a.label),11,te))),256))]),u(z,{comics:o(C),"total-pages":o(b),"is-fetching":o(d)},null,8,["comics","total-pages","is-fetching"])])],64)}}});export{de as default};
